# 视频监控信息管理系统 - API测试指南

## 项目概述

本项目是一个基于Spring Boot的视频监控信息管理系统，提供视频信息管理、视频分析、可视化展示、用户权限管理等功能。

## 技术栈

- **后端框架**：Spring Boot 3.4.5 + Java 21
- **数据库**：MySQL + MyBatis Plus 3.5.5
- **工具库**：Lombok
- **构建工具**：Maven

## 测试文件说明

### 📁 测试文件结构

```
doc/
├── api-test-video.http              # 视频信息管理接口测试
├── api-test-video-analysis.http     # 视频分析接口测试
├── api-test-user.http              # 用户权限管理接口测试
├── api-test-visualization.http     # 可视化展示接口测试
├── api-test-comprehensive.http     # 综合业务流程测试
└── API-测试指南.md                  # 本文档
```

### 📋 各测试文件详细说明

#### 1. `api-test-video.http` - 视频信息管理
**功能模块**：视频基础CRUD、查询、统计
**主要接口**：
- 视频信息的增删改查
- 分页查询和条件筛选
- 视频统计概览
- 错误场景和性能测试

**测试要点**：
- 基础CRUD操作完整性
- 分页查询参数验证
- 时间范围查询准确性
- 批量操作安全性

#### 2. `api-test-video-analysis.http` - 视频分析
**功能模块**：视频内容分析、行为分析、事件检测
**主要接口**：
- 人脸识别、车牌识别、物体检测
- 行为分析和事件检测
- 分析结果查询和统计
- 算法配置管理

**测试要点**：
- 不同分析类型的支持
- 批量分析功能
- 分析结果的准确存储
- 算法可用性检查

#### 3. `api-test-user.http` - 用户权限管理
**功能模块**：用户认证、角色权限管理
**主要接口**：
- 用户登录、注册、认证
- 角色和权限管理
- 用户角色分配
- 权限验证

**测试要点**：
- 用户认证流程
- 权限分配和验证
- 角色继承关系
- 安全性验证

#### 4. `api-test-visualization.http` - 可视化展示
**功能模块**：地图展示、报表生成、实时监控
**主要接口**：
- 监控点地图数据
- 仪表板图表数据
- 实时视频和告警
- 配置管理

**测试要点**：
- 地图数据的准确性
- 图表数据的实时性
- 报表生成功能
- 配置更新效果

#### 5. `api-test-comprehensive.http` - 综合测试
**功能模块**：完整业务流程测试
**测试场景**：
- 用户登录→视频管理→分析处理→数据可视化
- 批量操作和性能测试
- 错误处理和数据清理
- 系统监控和状态检查

## 🚀 测试环境设置

### 1. 基础配置

所有测试文件都配置了统一的基础URL：
```http
@baseUrl = http://localhost:8080
@contentType = application/json
```

### 2. 服务启动

确保以下服务正常运行：
- Spring Boot应用（端口：8080）
- MySQL数据库
- 相关依赖服务

### 3. 数据库初始化

运行数据库初始化脚本，确保：
- 数据库表结构完整
- 初始数据正确导入
- 用户权限数据就绪

## 📝 测试执行顺序

### 推荐测试流程：

1. **基础功能测试**
   ```
   用户管理 → 视频管理 → 视频分析 → 可视化展示
   ```

2. **业务流程测试**
   ```
   综合测试文件 → 完整业务场景验证
   ```

3. **性能压力测试**
   ```
   大数据量查询 → 批量操作 → 并发测试
   ```

4. **异常处理测试**
   ```
   错误参数 → 权限验证 → 边界条件
   ```

## 🔍 测试用例分类

### 功能测试
- ✅ 正常业务流程
- ✅ 边界值测试
- ✅ 参数验证
- ✅ 数据完整性

### 性能测试
- ⚡ 大分页查询
- ⚡ 复杂条件筛选
- ⚡ 批量数据操作
- ⚡ 并发访问测试

### 安全测试
- 🔒 用户认证验证
- 🔒 权限控制测试
- 🔒 SQL注入防护
- 🔒 数据敏感性处理

### 异常测试
- ❌ 无效参数处理
- ❌ 资源不存在场景
- ❌ 网络异常模拟
- ❌ 数据库连接异常

## 📊 预期响应格式

所有API都使用统一的响应格式：

### 成功响应
```json
{
    "code": 200,
    "message": "操作成功",
    "data": {
        // 具体数据内容
    }
}
```

### 失败响应
```json
{
    "code": 4xx/5xx,
    "message": "错误描述",
    "data": null
}
```

### 分页响应
```json
{
    "code": 200,
    "message": "操作成功",
    "data": {
        "records": [...],
        "total": 100,
        "current": 1,
        "size": 10,
        "pages": 10
    }
}
```

## 🛠️ 使用工具推荐

### HTTP测试工具
- **VS Code** + REST Client插件（推荐）
- **IntelliJ IDEA** + HTTP Client
- **Postman**
- **Insomnia**

### 数据库管理
- **Navicat**
- **DataGrip**
- **MySQL Workbench**

## ⚠️ 注意事项

### 测试前准备
1. 确认数据库连接正常
2. 检查应用启动状态
3. 验证初始数据完整性
4. 备份重要测试数据

### 测试过程中
1. 按顺序执行测试用例
2. 注意观察响应时间
3. 验证返回数据准确性
4. 记录异常情况

### 测试后清理
1. 清理测试产生的数据
2. 恢复初始状态
3. 保存测试结果报告
4. 更新测试用例

## 🐛 常见问题解决

### 1. 连接超时
- 检查服务是否启动
- 验证端口号配置
- 确认防火墙设置

### 2. 认证失败
- 验证用户名密码
- 检查Token有效性
- 确认权限配置

### 3. 数据库错误
- 检查数据库连接
- 验证表结构完整性
- 确认数据约束

### 4. 业务逻辑错误
- 验证参数格式
- 检查业务规则
- 确认数据关联性

## 📈 测试报告模板

### 测试执行结果
- 总测试用例数：XXX
- 通过用例数：XXX
- 失败用例数：XXX
- 成功率：XX%

### 性能指标
- 平均响应时间：XXXms
- 最大响应时间：XXXms
- 并发处理能力：XXX/s
- 系统稳定性：良好/一般/较差

### 问题汇总
- 功能性问题：X个
- 性能问题：X个
- 安全问题：X个
- 兼容性问题：X个

## 📞 技术支持

如遇到测试过程中的问题，请：
1. 检查本文档的常见问题部分
2. 查看系统日志获取详细错误信息
3. 联系开发团队获取技术支持

---
**文档版本**: v1.0  
**最后更新**: 2024-01-15  
**作者**: fyp  
**项目**: 视频监控信息管理系统 